import{aT as j,ad as Z,D as I,ca as q,aa as z,cb as M,w,cc as J,cd as K,aW as Q,ce as R,a9 as h,A as S,R as k,a as X,g as ee,aD as x,J as O,az as oe,S as te,cf as le,cg as ae,ch as T,r as v,aG as ne,z as P,G as se,a3 as ue,o as ce,P as ie,ci as de,cj as D}from"./index.8b9ac424.js";import{U as F}from"./el-input.27869b63.js";import{g as re}from"./validator.69ac0085.js";const fe=e=>{j(e)||Z("[useLockscreen]","You need to pass a ref param to this function");const o=I("popup"),n=q(()=>o.bm("parent","hidden"));if(!z||M(document.body,n.value))return;let t=0,u=!1,c="0";const l=()=>{setTimeout(()=>{R(document.body,n.value),u&&(document.body.style.width=c)},200)};w(e,d=>{if(!d){l();return}u=!M(document.body,n.value),u&&(c=document.body.style.width),t=re(o.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,r=J(document.body,"overflowY");t>0&&(s||r==="scroll")&&u&&(document.body.style.width=`calc(100% - ${t}px)`),K(document.body,n.value)}),Q(()=>l())},ye=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,n=!1;return{onClick:l=>{o&&n&&e(l),o=n=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{n=l.target===l.currentTarget}}},me=S({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ve={click:e=>e instanceof MouseEvent};var pe=X({name:"ElOverlay",props:me,emits:ve,setup(e,{slots:o,emit:n}){const t=I("overlay"),u=s=>{n("click",s)},{onClick:c,onMousedown:l,onMouseup:d}=ye(e.customMaskEvent?void 0:u);return()=>e.mask?ee("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:l,onMouseup:d},[O(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):oe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(o,"default")])}});const xe=pe,Ce=S({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:te},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),we={close:()=>!0},ke=S({...Ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:k(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Se={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Be=(e,o)=>{const t=ie().emit,{nextZIndex:u}=ae();let c="";const l=T(),d=T(),s=v(!1),r=v(!1),m=v(!1),p=v(e.zIndex||u());let f,y;const A=ne("namespace",de),N=P(()=>{const a={},i=`--${A.value}-dialog`;return e.fullscreen||(e.top&&(a[`${i}-margin-top`]=e.top),e.width&&(a[`${i}-width`]=se(e.width))),a}),L=P(()=>e.alignCenter?{display:"flex"}:{});function V(){t("opened")}function $(){t("closed"),t(F,!1),e.destroyOnClose&&(m.value=!1)}function H(){t("close")}function B(){y==null||y(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=D(()=>E(),e.openDelay):E()}function C(){f==null||f(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=D(()=>g(),e.closeDelay):g()}function b(){function a(i){i||(r.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(a):C()}function W(){e.closeOnClickModal&&b()}function E(){!z||(s.value=!0)}function g(){s.value=!1}function Y(){t("openAutoFocus")}function G(){t("closeAutoFocus")}function U(a){var i;((i=a.detail)==null?void 0:i.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&fe(s);function _(){e.closeOnPressEscape&&b()}return w(()=>e.modelValue,a=>{a?(r.value=!1,B(),m.value=!0,p.value=e.zIndex?p.value++:u(),ue(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):s.value&&C()}),w(()=>e.fullscreen,a=>{!o.value||(a?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),ce(()=>{e.modelValue&&(s.value=!0,m.value=!0,B())}),{afterEnter:V,afterLeave:$,beforeLeave:H,handleClose:b,onModalClick:W,close:C,doClose:g,onOpenAutoFocus:Y,onCloseAutoFocus:G,onCloseRequested:_,onFocusoutPrevented:U,titleId:l,bodyId:d,closed:r,style:N,overlayDialogStyle:L,rendered:m,visible:s,zIndex:p}};export{xe as E,Se as a,Ce as b,we as c,ke as d,ye as e,Be as u};
