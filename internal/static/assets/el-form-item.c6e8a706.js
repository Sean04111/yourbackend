import{A as $e,R as ue,aB as at,V as de,cf as Be,r as $,z as A,a as Z,D as we,w as te,a4 as st,af as Te,ag as Ce,ak as De,cl as Fe,b as ce,c as ze,J as Q,I as K,u as O,H as Ue,al as Ke,ac as re,cm as pe,ad as ot,o as Ge,m as Je,ah as ft,a2 as lt,g as ne,F as ut,a3 as Ye,X as dt,ch as ct,cz as pt,G as _e,h as oe,n as vt,j as mt,t as Ee,K as Ae,a6 as gt,q as Pe,e as Se,T as ht,N as yt,aw as bt}from"./index.8b9ac424.js";import{a as Ze}from"./size.4b7247cf.js";import{i as wt,d as Re,m as Ft,n as qt,g as xt}from"./el-input.27869b63.js";import{c as He}from"./index.c82c4d11.js";import{b as Ot,a as _t}from"./_baseClone.fc179f2b.js";import{c as Et}from"./_Uint8Array.c4f2c30d.js";function ve(){if(!arguments.length)return[];var i=arguments[0];return wt(i)?i:[i]}var At=4;function Ne(i){return Ot(i,At)}function Pt(i,e,t,n){if(!Re(i))return i;e=Ft(e,i);for(var r=-1,s=e.length,a=s-1,o=i;o!=null&&++r<s;){var f=qt(e[r]),h=t;if(f==="__proto__"||f==="constructor"||f==="prototype")return i;if(r!=a){var c=o[f];h=n?n(c,f,o):void 0,h===void 0&&(h=Re(c)?c:Et(e[r+1])?[]:{})}_t(o,f,h),o=o[f]}return i}function St(i,e,t){return i==null?i:Pt(i,e,t)}const Ar=i=>Object.keys(i),Pr=i=>Object.entries(i),fe=(i,e,t)=>({get value(){return xt(i,e,t)},set value(n){St(i,e,n)}}),Rt=$e({model:Object,rules:{type:ue(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:Ze},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),Nt={validate:(i,e,t)=>(at(i)||de(i))&&Be(e)&&de(t)};function jt(){const i=$([]),e=A(()=>{if(!i.value.length)return"0";const s=Math.max(...i.value);return s?`${s}px`:""});function t(s){const a=i.value.indexOf(s);return a===-1&&e.value,a}function n(s,a){if(s&&a){const o=t(a);i.value.splice(o,1,s)}else s&&i.value.push(s)}function r(s){const a=t(s);a>-1&&i.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:n,deregisterLabelWidth:r}}const X=(i,e)=>{const t=ve(e);return t.length>0?i.filter(n=>n.prop&&t.includes(n.prop)):i},Wt="ElForm",Mt=Z({name:Wt}),It=Z({...Mt,props:Rt,emits:Nt,setup(i,{expose:e,emit:t}){const n=i,r=[],s=He(),a=we("form"),o=A(()=>{const{labelPosition:v,inline:l}=n;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${v}`)]:v,[a.m("inline")]:l}]}),f=v=>{r.push(v)},h=v=>{v.prop&&r.splice(r.indexOf(v),1)},c=(v=[])=>{!n.model||X(r,v).forEach(l=>l.resetField())},y=(v=[])=>{X(r,v).forEach(l=>l.clearValidate())},w=A(()=>!!n.model),_=v=>{if(r.length===0)return[];const l=X(r,v);return l.length?l:[]},E=async v=>b(void 0,v),d=async(v=[])=>{if(!w.value)return!1;const l=_(v);if(l.length===0)return!0;let g={};for(const x of l)try{await x.validate("")}catch(q){g={...g,...q}}return Object.keys(g).length===0?!0:Promise.reject(g)},b=async(v=[],l)=>{const g=!Ke(l);try{const x=await d(v);return x===!0&&(l==null||l(x)),x}catch(x){const q=x;return n.scrollToError&&u(Object.keys(q)[0]),l==null||l(!1,q),g&&Promise.reject(q)}},u=v=>{var l;const g=X(r,v)[0];g&&((l=g.$el)==null||l.scrollIntoView())};return te(()=>n.rules,()=>{n.validateOnRuleChange&&E().catch(v=>st())},{deep:!0}),Te(Fe,Ce({...De(n),emit:t,resetFields:c,clearValidate:y,validateField:b,addField:f,removeField:h,...jt()})),e({validate:E,validateField:b,resetFields:c,clearValidate:y,scrollToField:u}),(v,l)=>(ce(),ze("form",{class:K(O(o))},[Q(v.$slots,"default")],2))}});var Lt=Ue(It,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function B(){return B=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},B.apply(this,arguments)}function Vt(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Y(i,e)}function me(i){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},me(i)}function Y(i,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Y(i,e)}function $t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ee(i,e,t){return $t()?ee=Reflect.construct.bind():ee=function(r,s,a){var o=[null];o.push.apply(o,s);var f=Function.bind.apply(r,o),h=new f;return a&&Y(h,a.prototype),h},ee.apply(null,arguments)}function Bt(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function ge(i){var e=typeof Map=="function"?new Map:void 0;return ge=function(n){if(n===null||!Bt(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return ee(n,arguments,me(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Y(r,n)},ge(i)}var Tt=/%[sdj%]/g,Ct=function(){};typeof process<"u"&&process.env;function he(i){if(!i||!i.length)return null;var e={};return i.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function j(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var r=0,s=t.length;if(typeof i=="function")return i.apply(null,t);if(typeof i=="string"){var a=i.replace(Tt,function(o){if(o==="%%")return"%";if(r>=s)return o;switch(o){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return o}});return a}return i}function Dt(i){return i==="string"||i==="url"||i==="hex"||i==="email"||i==="date"||i==="pattern"}function P(i,e){return!!(i==null||e==="array"&&Array.isArray(i)&&!i.length||Dt(e)&&typeof i=="string"&&!i)}function zt(i,e,t){var n=[],r=0,s=i.length;function a(o){n.push.apply(n,o||[]),r++,r===s&&t(n)}i.forEach(function(o){e(o,a)})}function je(i,e,t){var n=0,r=i.length;function s(a){if(a&&a.length){t(a);return}var o=n;n=n+1,o<r?e(i[o],s):t([])}s([])}function Ut(i){var e=[];return Object.keys(i).forEach(function(t){e.push.apply(e,i[t]||[])}),e}var We=function(i){Vt(e,i);function e(t,n){var r;return r=i.call(this,"Async Validation Error")||this,r.errors=t,r.fields=n,r}return e}(ge(Error));function Kt(i,e,t,n,r){if(e.first){var s=new Promise(function(w,_){var E=function(u){return n(u),u.length?_(new We(u,he(u))):w(r)},d=Ut(i);je(d,t,E)});return s.catch(function(w){return w}),s}var a=e.firstFields===!0?Object.keys(i):e.firstFields||[],o=Object.keys(i),f=o.length,h=0,c=[],y=new Promise(function(w,_){var E=function(b){if(c.push.apply(c,b),h++,h===f)return n(c),c.length?_(new We(c,he(c))):w(r)};o.length||(n(c),w(r)),o.forEach(function(d){var b=i[d];a.indexOf(d)!==-1?je(b,t,E):zt(b,t,E)})});return y.catch(function(w){return w}),y}function Gt(i){return!!(i&&i.message!==void 0)}function Jt(i,e){for(var t=i,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function Me(i,e){return function(t){var n;return i.fullFields?n=Jt(e,i.fullFields):n=e[t.field||i.fullField],Gt(t)?(t.field=t.field||i.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||i.fullField}}}function Ie(i,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];typeof n=="object"&&typeof i[t]=="object"?i[t]=B({},i[t],n):i[t]=n}}return i}var Xe=function(e,t,n,r,s,a){e.required&&(!n.hasOwnProperty(e.field)||P(t,a||e.type))&&r.push(j(s.messages.required,e.fullField))},Yt=function(e,t,n,r,s){(/^\s+$/.test(t)||t==="")&&r.push(j(s.messages.whitespace,e.fullField))},k,Zt=function(){if(k)return k;var i="[a-fA-F\\d:]",e=function(g){return g&&g.includeBoundaries?"(?:(?<=\\s|^)(?="+i+")|(?<="+i+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+t+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+t+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+t+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+t+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+t+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+t+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+t+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),a=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),f=function(g){return g&&g.exact?s:new RegExp("(?:"+e(g)+t+e(g)+")|(?:"+e(g)+r+e(g)+")","g")};f.v4=function(l){return l&&l.exact?a:new RegExp(""+e(l)+t+e(l),"g")},f.v6=function(l){return l&&l.exact?o:new RegExp(""+e(l)+r+e(l),"g")};var h="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",y=f.v4().source,w=f.v6().source,_="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",E="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",d="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",b="(?::\\d{2,5})?",u='(?:[/?#][^\\s"]*)?',v="(?:"+h+"|www\\.)"+c+"(?:localhost|"+y+"|"+w+"|"+_+E+d+")"+b+u;return k=new RegExp("(?:^"+v+"$)","i"),k},Le={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},G={integer:function(e){return G.number(e)&&parseInt(e,10)===e},float:function(e){return G.number(e)&&!G.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!G.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Le.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Zt())},hex:function(e){return typeof e=="string"&&!!e.match(Le.hex)}},Ht=function(e,t,n,r,s){if(e.required&&t===void 0){Xe(e,t,n,r,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?G[o](t)||r.push(j(s.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(j(s.messages.types[o],e.fullField,e.type))},Xt=function(e,t,n,r,s){var a=typeof e.len=="number",o=typeof e.min=="number",f=typeof e.max=="number",h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,y=null,w=typeof t=="number",_=typeof t=="string",E=Array.isArray(t);if(w?y="number":_?y="string":E&&(y="array"),!y)return!1;E&&(c=t.length),_&&(c=t.replace(h,"_").length),a?c!==e.len&&r.push(j(s.messages[y].len,e.fullField,e.len)):o&&!f&&c<e.min?r.push(j(s.messages[y].min,e.fullField,e.min)):f&&!o&&c>e.max?r.push(j(s.messages[y].max,e.fullField,e.max)):o&&f&&(c<e.min||c>e.max)&&r.push(j(s.messages[y].range,e.fullField,e.min,e.max))},z="enum",kt=function(e,t,n,r,s){e[z]=Array.isArray(e[z])?e[z]:[],e[z].indexOf(t)===-1&&r.push(j(s.messages[z],e.fullField,e[z].join(", ")))},Qt=function(e,t,n,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(j(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(t)||r.push(j(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},m={required:Xe,whitespace:Yt,type:Ht,range:Xt,enum:kt,pattern:Qt},er=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t,"string")&&!e.required)return n();m.required(e,t,r,a,s,"string"),P(t,"string")||(m.type(e,t,r,a,s),m.range(e,t,r,a,s),m.pattern(e,t,r,a,s),e.whitespace===!0&&m.whitespace(e,t,r,a,s))}n(a)},tr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&m.type(e,t,r,a,s)}n(a)},rr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&(m.type(e,t,r,a,s),m.range(e,t,r,a,s))}n(a)},nr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&m.type(e,t,r,a,s)}n(a)},ir=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),P(t)||m.type(e,t,r,a,s)}n(a)},ar=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&(m.type(e,t,r,a,s),m.range(e,t,r,a,s))}n(a)},sr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&(m.type(e,t,r,a,s),m.range(e,t,r,a,s))}n(a)},or=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return n();m.required(e,t,r,a,s,"array"),t!=null&&(m.type(e,t,r,a,s),m.range(e,t,r,a,s))}n(a)},fr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&m.type(e,t,r,a,s)}n(a)},lr="enum",ur=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s),t!==void 0&&m[lr](e,t,r,a,s)}n(a)},dr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t,"string")&&!e.required)return n();m.required(e,t,r,a,s),P(t,"string")||m.pattern(e,t,r,a,s)}n(a)},cr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t,"date")&&!e.required)return n();if(m.required(e,t,r,a,s),!P(t,"date")){var f;t instanceof Date?f=t:f=new Date(t),m.type(e,f,r,a,s),f&&m.range(e,f.getTime(),r,a,s)}}n(a)},pr=function(e,t,n,r,s){var a=[],o=Array.isArray(t)?"array":typeof t;m.required(e,t,r,a,s,o),n(a)},le=function(e,t,n,r,s){var a=e.type,o=[],f=e.required||!e.required&&r.hasOwnProperty(e.field);if(f){if(P(t,a)&&!e.required)return n();m.required(e,t,r,o,s,a),P(t,a)||m.type(e,t,r,o,s)}n(o)},vr=function(e,t,n,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(P(t)&&!e.required)return n();m.required(e,t,r,a,s)}n(a)},J={string:er,method:tr,number:rr,boolean:nr,regexp:ir,integer:ar,float:sr,array:or,object:fr,enum:ur,pattern:dr,date:cr,url:le,hex:le,email:le,required:pr,any:vr};function ye(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var be=ye(),H=function(){function i(t){this.rules=null,this._messages=be,this.define(t)}var e=i.prototype;return e.define=function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(s){var a=n[s];r.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(n){return n&&(this._messages=Ie(ye(),n)),this._messages},e.validate=function(n,r,s){var a=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var o=n,f=r,h=s;if(typeof f=="function"&&(h=f,f={}),!this.rules||Object.keys(this.rules).length===0)return h&&h(null,o),Promise.resolve(o);function c(d){var b=[],u={};function v(g){if(Array.isArray(g)){var x;b=(x=b).concat.apply(x,g)}else b.push(g)}for(var l=0;l<d.length;l++)v(d[l]);b.length?(u=he(b),h(b,u)):h(null,o)}if(f.messages){var y=this.messages();y===be&&(y=ye()),Ie(y,f.messages),f.messages=y}else f.messages=this.messages();var w={},_=f.keys||Object.keys(this.rules);_.forEach(function(d){var b=a.rules[d],u=o[d];b.forEach(function(v){var l=v;typeof l.transform=="function"&&(o===n&&(o=B({},o)),u=o[d]=l.transform(u)),typeof l=="function"?l={validator:l}:l=B({},l),l.validator=a.getValidationMethod(l),l.validator&&(l.field=d,l.fullField=l.fullField||d,l.type=a.getType(l),w[d]=w[d]||[],w[d].push({rule:l,value:u,source:o,field:d}))})});var E={};return Kt(w,f,function(d,b){var u=d.rule,v=(u.type==="object"||u.type==="array")&&(typeof u.fields=="object"||typeof u.defaultField=="object");v=v&&(u.required||!u.required&&d.value),u.field=d.field;function l(q,M){return B({},M,{fullField:u.fullField+"."+q,fullFields:u.fullFields?[].concat(u.fullFields,[q]):[q]})}function g(q){q===void 0&&(q=[]);var M=Array.isArray(q)?q:[q];!f.suppressWarning&&M.length&&i.warning("async-validator:",M),M.length&&u.message!==void 0&&(M=[].concat(u.message));var N=M.map(Me(u,o));if(f.first&&N.length)return E[u.field]=1,b(N);if(!v)b(N);else{if(u.required&&!d.value)return u.message!==void 0?N=[].concat(u.message).map(Me(u,o)):f.error&&(N=[f.error(u,j(f.messages.required,u.field))]),b(N);var V={};u.defaultField&&Object.keys(d.value).map(function(I){V[I]=u.defaultField}),V=B({},V,d.rule.fields);var U={};Object.keys(V).forEach(function(I){var W=V[I],ie=Array.isArray(W)?W:[W];U[I]=ie.map(l.bind(null,I))});var T=new i(U);T.messages(f.messages),d.rule.options&&(d.rule.options.messages=f.messages,d.rule.options.error=f.error),T.validate(d.value,d.rule.options||f,function(I){var W=[];N&&N.length&&W.push.apply(W,N),I&&I.length&&W.push.apply(W,I),b(W.length?W:null)})}}var x;if(u.asyncValidator)x=u.asyncValidator(u,d.value,g,d.source,f);else if(u.validator){try{x=u.validator(u,d.value,g,d.source,f)}catch(q){console.error==null||console.error(q),f.suppressValidatorError||setTimeout(function(){throw q},0),g(q.message)}x===!0?g():x===!1?g(typeof u.message=="function"?u.message(u.fullField||u.field):u.message||(u.fullField||u.field)+" fails"):x instanceof Array?g(x):x instanceof Error&&g(x.message)}x&&x.then&&x.then(function(){return g()},function(q){return g(q)})},function(d){c(d)},o)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!J.hasOwnProperty(n.type))throw new Error(j("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?J.required:J[this.getType(n)]||void 0},i}();H.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");J[e]=t};H.warning=Ct;H.messages=be;H.validators=J;const mr=["","error","validating","success"],gr=$e({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:ue([String,Array])},required:{type:Boolean,default:void 0},rules:{type:ue([Object,Array])},error:String,validateStatus:{type:String,values:mr},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Ze}}),Ve="ElLabelWrap";var hr=Z({name:Ve,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(i,{slots:e}){const t=re(Fe,void 0),n=re(pe);n||ot(Ve,"usage: <el-form-item><label-wrap /></el-form-item>");const r=we("form"),s=$(),a=$(0),o=()=>{var c;if((c=s.value)!=null&&c.firstElementChild){const y=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(y))}else return 0},f=(c="update")=>{Ye(()=>{e.default&&i.isAutoWidth&&(c==="update"?a.value=o():c==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},h=()=>f("update");return Ge(()=>{h()}),Je(()=>{f("remove")}),ft(()=>h()),te(a,(c,y)=>{i.updateAll&&(t==null||t.registerLabelWidth(c,y))}),lt(A(()=>{var c,y;return(y=(c=s.value)==null?void 0:c.firstElementChild)!=null?y:null}),h),()=>{var c,y;if(!e)return null;const{isAutoWidth:w}=i;if(w){const _=t==null?void 0:t.autoLabelWidth,E=n==null?void 0:n.hasLabel,d={};if(E&&_&&_!=="auto"){const b=Math.max(0,Number.parseInt(_,10)-a.value),u=t.labelPosition==="left"?"marginRight":"marginLeft";b&&(d[u]=`${b}px`)}return ne("div",{ref:s,class:[r.be("item","label-wrap")],style:d},[(c=e.default)==null?void 0:c.call(e)])}else return ne(ut,{ref:s},[(y=e.default)==null?void 0:y.call(e)])}}});const yr=["role","aria-labelledby"],br=Z({name:"ElFormItem"}),wr=Z({...br,props:gr,setup(i,{expose:e}){const t=i,n=dt(),r=re(Fe,void 0),s=re(pe,void 0),a=He(void 0,{formItem:!1}),o=we("form-item"),f=ct().value,h=$([]),c=$(""),y=pt(c,100),w=$(""),_=$();let E,d=!1;const b=A(()=>{if((r==null?void 0:r.labelPosition)==="top")return{};const p=_e(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return p?{width:p}:{}}),u=A(()=>{if((r==null?void 0:r.labelPosition)==="top"||(r==null?void 0:r.inline))return{};if(!t.label&&!t.labelWidth&&V)return{};const p=_e(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return!t.label&&!n.label?{marginLeft:p}:{}}),v=A(()=>[o.b(),o.m(a.value),o.is("error",c.value==="error"),o.is("validating",c.value==="validating"),o.is("success",c.value==="success"),o.is("required",ie.value||t.required),o.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:r==null?void 0:r.statusIcon}]),l=A(()=>Be(t.inlineMessage)?t.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),g=A(()=>[o.e("error"),{[o.em("error","inline")]:l.value}]),x=A(()=>t.prop?de(t.prop)?t.prop:t.prop.join("."):""),q=A(()=>!!(t.label||n.label)),M=A(()=>t.for||h.value.length===1?h.value[0]:void 0),N=A(()=>!M.value&&q.value),V=!!s,U=A(()=>{const p=r==null?void 0:r.model;if(!(!p||!t.prop))return fe(p,t.prop).value}),T=A(()=>{const{required:p}=t,F=[];t.rules&&F.push(...ve(t.rules));const R=r==null?void 0:r.rules;if(R&&t.prop){const S=fe(R,t.prop).value;S&&F.push(...ve(S))}if(p!==void 0){const S=F.map((L,D)=>[L,D]).filter(([L])=>Object.keys(L).includes("required"));if(S.length>0)for(const[L,D]of S)L.required!==p&&(F[D]={...L,required:p});else F.push({required:p})}return F}),I=A(()=>T.value.length>0),W=p=>T.value.filter(R=>!R.trigger||!p?!0:Array.isArray(R.trigger)?R.trigger.includes(p):R.trigger===p).map(({trigger:R,...S})=>S),ie=A(()=>T.value.some(p=>p.required)),Qe=A(()=>{var p;return y.value==="error"&&t.showMessage&&((p=r==null?void 0:r.showMessage)!=null?p:!0)}),qe=A(()=>`${t.label||""}${(r==null?void 0:r.labelSuffix)||""}`),C=p=>{c.value=p},et=p=>{var F,R;const{errors:S,fields:L}=p;(!S||!L)&&console.error(p),C("error"),w.value=S?(R=(F=S==null?void 0:S[0])==null?void 0:F.message)!=null?R:`${t.prop} is required`:"",r==null||r.emit("validate",t.prop,!1,w.value)},tt=()=>{C("success"),r==null||r.emit("validate",t.prop,!0,"")},rt=async p=>{const F=x.value;return new H({[F]:p}).validate({[F]:U.value},{firstFields:!0}).then(()=>(tt(),!0)).catch(S=>(et(S),Promise.reject(S)))},xe=async(p,F)=>{if(d||!t.prop)return!1;const R=Ke(F);if(!I.value)return F==null||F(!1),!1;const S=W(p);return S.length===0?(F==null||F(!0),!0):(C("validating"),rt(S).then(()=>(F==null||F(!0),!0)).catch(L=>{const{fields:D}=L;return F==null||F(!1,D),R?!1:Promise.reject(D)}))},ae=()=>{C(""),w.value="",d=!1},Oe=async()=>{const p=r==null?void 0:r.model;if(!p||!t.prop)return;const F=fe(p,t.prop);d=!0,F.value=Ne(E),await Ye(),ae(),d=!1},nt=p=>{h.value.includes(p)||h.value.push(p)},it=p=>{h.value=h.value.filter(F=>F!==p)};te(()=>t.error,p=>{w.value=p||"",C(p?"error":"")},{immediate:!0}),te(()=>t.validateStatus,p=>C(p||""));const se=Ce({...De(t),$el:_,size:a,validateState:c,labelId:f,inputIds:h,isGroup:N,hasLabel:q,addInputId:nt,removeInputId:it,resetField:Oe,clearValidate:ae,validate:xe});return Te(pe,se),Ge(()=>{t.prop&&(r==null||r.addField(se),E=Ne(U.value))}),Je(()=>{r==null||r.removeField(se)}),e({size:a,validateMessage:w,validateState:c,validate:xe,clearValidate:ae,resetField:Oe}),(p,F)=>{var R;return ce(),ze("div",{ref_key:"formItemRef",ref:_,class:K(O(v)),role:O(N)?"group":void 0,"aria-labelledby":O(N)?O(f):void 0},[ne(O(hr),{"is-auto-width":O(b).width==="auto","update-all":((R=O(r))==null?void 0:R.labelWidth)==="auto"},{default:oe(()=>[O(q)?(ce(),vt(gt(O(M)?"label":"div"),{key:0,id:O(f),for:O(M),class:K(O(o).e("label")),style:Ae(O(b))},{default:oe(()=>[Q(p.$slots,"label",{label:O(qe)},()=>[mt(Ee(O(qe)),1)])]),_:3},8,["id","for","class","style"])):Pe("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Se("div",{class:K(O(o).e("content")),style:Ae(O(u))},[Q(p.$slots,"default"),ne(ht,{name:`${O(o).namespace.value}-zoom-in-top`},{default:oe(()=>[O(Qe)?Q(p.$slots,"error",{key:0,error:w.value},()=>[Se("div",{class:K(O(g))},Ee(w.value),3)]):Pe("v-if",!0)]),_:3},8,["name"])],6)],10,yr)}}});var ke=Ue(wr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Sr=yt(Lt,{FormItem:ke}),Rr=bt(ke);export{Rr as E,Sr as a,Pr as e,Ar as k};
