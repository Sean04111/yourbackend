import{a as $,r as n,ag as h,c as V,e as i,t as u,g as r,h as d,I as C,u as x,b as I,x as g,j as P,_ as F}from"./index.2b950906.js";import{E as D}from"./el-link.2e782419.js";import{E as K,a as U}from"./el-form-item.f64bd487.js";import{E as q}from"./el-input.ef3567cd.js";import{u as B,o as M,p as N,j as R,k as S}from"./index.3c8d6064.js";import"./size.4b7247cf.js";import"./index.6f56d4cc.js";import"./_baseClone.7a5b16d4.js";import"./_Uint8Array.798c436b.js";const j={class:"login"},L={class:"login-form"},T=["disabled"],z=$({__name:"reguser",setup(A){const a=n(),b=n("left"),c=B(),p=n(""),m=n(!1),o=h({email:"",newpassword:"",check:""}),f=n(),E=h({email:[{required:!0,validator:(t,e,l)=>{if(e)M.test(o.email)?l():l(new Error("wrong email format"));else return l(new Error("Please input the email"))},trigger:"blur"}],newpassword:[{required:!0,validator:async(t,e,l)=>{if(e==="")l(new Error("Please input the password"));else{if(N.test(o.newpassword))l(new Error("no \u4E2D\u6587 in password"));else if(!R.test(o.newpassword))l(new Error("password must contain letters, numbers, length > 8"));else if(o.newpassword.length>7){if(!a.value)return;a.value.validateField("newpassword",()=>null)}else l(new Error("Please input the password's length >= 8"));l()}},trigger:"blur"}],check:[{required:!0,message:"please input code",rigger:"blur"}]});function _(){if(!m.value){m.value=!0;let t=60,e=setInterval(()=>{t--,p.value=`${t}s `},1e3);setTimeout(()=>{m.value=!1,p.value="",clearInterval(e)},t*1e3),S({email:o.email}).then(l=>{f.value=l.code},l=>{console.log(l.message)})}}function w(t){!t||t.validate(e=>{if(e)f.value!=null&&c.reguser({...o,code:f.value});else return!1})}return(t,e)=>{const l=q,v=K,k=U,y=D;return I(),V("div",j,[i("h3",null,"your nodes "+u(t.$t("reguser")),1),i("div",L,[r(k,{"label-position":b.value,"label-width":"100px",rules:E,model:o,style:{"max-width":"460px"},ref_key:"ruleFormRef",ref:a},{default:d(()=>[r(v,{label:t.$t("email"),prop:"email"},{default:d(()=>[r(l,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),modelModifiers:{trim:!0},placeholder:"email",maxlength:"60",onKeydown:e[1]||(e[1]=g(s=>_(),["enter"]))},null,8,["modelValue"]),i("button",{onClick:e[2]||(e[2]=s=>_()),style:{float:"left"},disabled:m.value},u(p.value)+u(t.$t("getcode")),9,T)]),_:1},8,["label"]),r(v,{label:t.$t("newpassword"),prop:"newpassword"},{default:d(()=>[r(l,{modelValue:o.newpassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.newpassword=s),modelModifiers:{trim:!0},maxlength:"20",autocomplete:"off",placeholder:"new password",onKeydown:e[4]||(e[4]=g(s=>w(a.value),["enter"]))},null,8,["modelValue"])]),_:1},8,["label"]),r(v,{label:t.$t("verification"),prop:"check"},{default:d(()=>[r(l,{modelValue:o.check,"onUpdate:modelValue":e[5]||(e[5]=s=>o.check=s),modelModifiers:{trim:!0},placeholder:"verification code",maxlength:"10",onKeydown:e[6]||(e[6]=g(s=>w(a.value),["enter"]))},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["label-position","rules","model"]),i("div",{class:C(["submit",{shake:x(c).getDisabled}])},[i("button",{onClick:e[7]||(e[7]=s=>w(a.value)),style:{float:"left"}},u(t.$t("reguser")),1),r(y,{type:"success",href:"/login"},{default:d(()=>[P(u(t.$t("regusermessage")),1)]),_:1})],2)])])}}});const te=F(z,[["__scopeId","data-v-ef821337"]]);export{te as default};
