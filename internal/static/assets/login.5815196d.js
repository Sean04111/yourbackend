import{a as y,r as h,ag as d,c as b,e as f,t as u,g as r,h as n,b as V,x as _,j as g,I as $,u as F,_ as k}from"./index.2b950906.js";import{E as B,a as P}from"./el-form-item.f64bd487.js";import{E as x}from"./el-link.2e782419.js";import{E as C}from"./el-button.50aa5d4d.js";import{E as I}from"./el-input.ef3567cd.js";import{u as U,o as D,p as K,j as N}from"./index.3c8d6064.js";import"./size.4b7247cf.js";import"./index.6f56d4cc.js";import"./_baseClone.7a5b16d4.js";import"./_Uint8Array.798c436b.js";import"./index.fc7ea59d.js";const R={class:"login"},S=y({__name:"login",setup(j){const p=U(),l=h(),o=d({pass:"",email:""}),w=d({email:[{required:!0,validator:(t,e,s)=>{if(e)D.test(o.email)?s():s(new Error("wrong email format"));else return s(new Error("Please input the email"))},trigger:"blur"}],pass:[{required:!0,validator:async(t,e,s)=>{if(e==="")s(new Error("Please input the password"));else{if(K.test(o.pass))s(new Error("no \u4E2D\u6587 in password"));else if(!N.test(o.pass))s(new Error("password must contain letters, numbers, length > 8"));else if(o.pass.length>7){if(!l.value)return;l.value.validateField("pass",()=>null)}else s(new Error("Please input the password's length >= 8"));s()}},trigger:"blur"}]}),i=t=>{!t||t.validate(e=>{if(e)console.log("submit!"),p.loginByUsername(o);else return console.log("error submit!"),!1})};return(t,e)=>{const s=I,m=B,c=C,v=x,E=P;return V(),b("div",R,[f("h3",null,"your nodes "+u(t.$t("login")),1),r(E,{class:"login-form",ref_key:"ruleFormRef",ref:l,model:o,"status-icon":"",rules:w,"label-width":"120px","label-position":"top"},{default:n(()=>[r(m,{label:t.$t("email"),prop:"email"},{default:n(()=>[r(s,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),modelModifiers:{trim:!0},placeholder:"email",onKeydown:e[1]||(e[1]=_(a=>i(l.value),["enter"]))},null,8,["modelValue"])]),_:1},8,["label"]),r(m,{label:t.$t("newpassword"),prop:"pass"},{default:n(()=>[r(s,{modelValue:o.pass,"onUpdate:modelValue":e[2]||(e[2]=a=>o.pass=a),modelModifiers:{trim:!0},placeholder:"password",type:"password",autocomplete:"off","show-password":"true",onKeydown:e[3]||(e[3]=_(a=>i(l.value),["enter"]))},null,8,["modelValue"])]),_:1},8,["label"]),r(m,null,{default:n(()=>[f("div",{class:$(["submit",{shake:F(p).getDisabled}])},[r(c,{type:"primary",onClick:e[4]||(e[4]=a=>i(l.value))},{default:n(()=>[g(u(t.$t("login")),1)]),_:1}),r(v,{type:"success",href:"/reguser"},{default:n(()=>[g(u(t.$t("loginmessage")),1)]),_:1})],2)]),_:1})]),_:1},8,["model","rules"])])}}});const Y=k(S,[["__scopeId","data-v-2387e607"]]);export{Y as default};
