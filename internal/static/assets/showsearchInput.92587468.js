import{d as N,a as P,r as p,w as Q,o as U,m as R,b as _,c as v,g as i,h as g,n as W,F as z,i as A,q as X,u as l,s as O,x as Y,f as F,v as M,e as a,t as k,T as Z,E as j,_ as G,y as ee,z as te,j as x,k as $}from"./index.2b950906.js";import{E as se}from"./el-input.ef3567cd.js";import{E as le}from"./el-button.50aa5d4d.js";import{E as ae,a as oe}from"./el-select.e6e118f3.js";import{_ as q}from"./lodash.467b4ce8.js";import{h as b,a as ne}from"./index.3c8d6064.js";import{E as ie,a as re}from"./el-skeleton-item.b0567a7c.js";const ce=e=>b.request("post","/api/article/searchByTitle",{data:e}),ue=e=>b.request("post","/api/article/searchMoreByTitle",{data:e}),he=e=>b.request("get","/api/article/getarticle",{params:e}),de=e=>b.request("get","/my/myarlist",{params:e}),pe=e=>b.request("get","/my/allardatas",{params:e}),ge=e=>b.request("get","/my/ardata",{params:e}),_e=e=>b.request("get","/my/ardatalable",{params:e}),H=N("searchInput",{state:()=>({list:[],inputSearch:"",loading:!0,lazy:!0,a:{id:0,title:"nothing",url:"#",description:"no data",likes:0,reads:0,pubTime:"--",imglink:"https://p3-passport.byteimg.com/img/mosaic-legacy/3791/5070639578~180x180.png"}}),getters:{show:e=>e.list.length>0,allList:e=>e.list},actions:{searchInputOnce(e,c){!e.trim()||(c.trim()!=""?window.open(c.trim()+e,"_blank"):(this.loading=!0,ce({input:e}).then(f=>{this.list=f.list,this.loading=!1},f=>{console.log("!!!!",f),this.show||this.list.push(this.a),this.loading=!1})))},searchMore(){this.lazy=!1,ue({input:this.inputSearch,num:this.list.length}).then(e=>{this.list=[...this.list,...e.list],this.loading=!1,this.lazy=!0},e=>{console.log(e),this.show||this.list.push(this.a),this.loading=!1,this.lazy=!0})},searchSelf(){this.lazy=!1,this.list.length===0&&(this.loading=!0),de({input:this.inputSearch,num:this.list.length}).then(e=>{this.list=[...this.list,...e.list],this.loading=!1,this.lazy=!0},e=>{console.log(e),this.show||this.list.push(this.a),this.lazy=!0,this.loading=!1})},searchdefaultOnce(){he({input:this.inputSearch}).then(e=>{this.list=e.list,this.loading=!1},e=>{console.log(e),this.show||this.list.push(this.a),this.loading=!1})}}}),fe={class:"mt-4"},me={class:"autoInput"},ve=["onClick"],be={class:"autolabel"},we=P({__name:"searchLocal",props:{isSelf:{type:Boolean,required:!0},autoComp:{type:Boolean}},setup(e){const c=e,u=p(!1),f=p(""),C=!0,n=p("https://www.google.com/search?q="),m=p([]),w=[{value:"https://www.google.com/search?q=",label:"Google"},{value:"https://www.bing.com/search?q=",label:"bing"},{value:"https://github.com/search?q=",label:"Github"},{value:"https://www.baidu.com/s?wd=",label:"Baidu"},{value:"https://www.npmjs.com/search?q=",label:"npm"},{value:"https://stackoverflow.com/search?q=",label:"stackoverflow"},{value:"https://search.bilibili.com/all?keyword=",label:"bilibili"},{value:" ",label:"this site(\u7AD9\u5185\u6587\u7AE0)"}],s=H();s.inputSearch=f.value;const S=q.debounce((h,t)=>{c.isSelf?(s.list.length=0,s.searchSelf()):s.searchInputOnce(h,t)},200,{leading:!0});function E(h){console.log(" setFocus",h),u.value=h}const B=q.debounce(h=>{ne.get(`/api/inputsuggestion?input=${h}`).then(t=>{m.value.length=0,t.data.status===0&&(m.value=t.data.suggest)},t=>{console.log(t.message)})},200,{leading:!0});return Q(n,(h,t)=>{localStorage.setItem("searchSelect",h)}),U(()=>{n.value=localStorage.getItem("searchSelect")||"https://www.google.com/search?q=",s.show||(c.isSelf?s.searchSelf():s.searchdefaultOnce())}),R(()=>{s.list.length=0,s.inputSearch=""}),(h,t)=>{const D=ae,I=oe,d=le,y=se,V=j;return _(),v("div",fe,[i(y,{modelValue:l(s).inputSearch,"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).inputSearch=o),placeholder:"Enter your search term",clearable:C,class:"input-with-select",maxlength:"200",onKeyup:t[3]||(t[3]=Y(o=>l(S)(l(s).inputSearch,n.value),["enter"])),onFocus:t[4]||(t[4]=o=>E(!0)),onBlur:t[5]||(t[5]=o=>E(!1)),onInput:t[6]||(t[6]=o=>l(B)(l(s).inputSearch))},{prepend:g(()=>[c.isSelf?X("",!0):(_(),W(I,{key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),placeholder:"Select",style:{width:"115px"}},{default:g(()=>[(_(),v(z,null,A(w,o=>i(D,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]))]),append:g(()=>[i(d,{icon:l(O),onClick:t[1]||(t[1]=o=>l(S)(l(s).inputSearch,n.value))},null,8,["icon"])]),_:1},8,["modelValue"]),i(Z,{name:"fade"},{default:g(()=>[F(a("ul",me,[(_(!0),v(z,null,A(m.value,(o,T)=>(_(),v("li",{class:"autoIn",key:T,onClick:L=>{l(s).inputSearch=o.label,l(S)(l(s).inputSearch,n.value)}},[i(V,{class:"autoicon"},{default:g(()=>[i(l(O))]),_:1}),a("span",be,k(o.label),1)],8,ve))),128))],512),[[M,m.value.length&&e.autoComp&&l(s).inputSearch&&u.value]])]),_:1})])}}});const Ge=G(we,[["__scopeId","data-v-39401ac4"]]),Se=N("ardata",{state:()=>({lineData:[0],lineLable:[""],barData:[0],barLable:[""],chartlable:["\u70B9\u51FB\u5DE6\u4FA7\u6587\u7AE0\u5217\u8868\u4EE5\u663E\u793A\u5177\u4F53\u6587\u7AE0\u9605\u8BFB\u6570\u636E",""]}),actions:{getline(e,c){this.chartlable[0]=c+"\u7684\u9605\u8BFB\u6570\u636E",ge({id:e}).then(u=>{this.lineData=u.lineData,this.lineLable=u.lineLable},u=>{console.log(u.message)})},getardataAll(){pe().then(e=>{this.barData=e.barData,this.barLable=e.barLable},e=>{console.log(e.message)})},getChartLable(){_e().then(e=>{this.chartlable[1]=e.chartlable},e=>{console.log(e.message)})}}}),ye={class:"searchSelect-ar"},ke={class:"ul-list-item-ar"},Ee=["onClick"],xe={class:"imglinks"},Be=["src"],Ie={class:"outseideItem-ar"},Le={class:"itemTitle"},qe=["title"],Ce=["href"],De={style:{width:"400px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},Ve={class:"itemDecri"},Te=["title"],$e={class:"itemTitle"},ze=P({__name:"showsearchInput",props:{isSelf:{type:Boolean,required:!0}},setup(e){const c=e,u=ee(),f=Se(),C=p(!1),n=H(),m=p(0),w=p(0),s=p(0),S=p(null),E=120;let B=te(()=>Math.ceil(m.value/E));U(()=>{m.value=document.body.clientHeight,w.value=0,s.value=w.value+B.value});function h(){let d=Math.floor(S.value.scrollTop);w.value=Math.floor(d/E),s.value=w.value+B.value,s.value-n.list.length>0&&t()}const t=q.throttle(function(){!C.value&&n.lazy&&(c.isSelf?n.searchSelf():n.searchMore())},500,{trailing:!1}),D=d=>{if(c.isSelf)f.getline(d.id,d.title);else{let y=window.location.protocol+"//"+window.location.host+"/reading?ar_id="+d.id;u.prop=!0,u.datas={Ar_id:d.id},window.open(y,d.title)}},I=q.throttle(function(){h()},16.7,{trailing:!1});return(d,y)=>{const V=ie,o=re,T=$("Pointer"),L=j,K=$("View"),J=$("Clock");return _(),v("div",ye,[F(a("div",null,[i(o,{direction:"vertical",alignment:"flex-start"},{default:g(()=>[i(V,{style:{width:"500px","text-align":"left"},loading:l(n).loading,animated:"",rows:2},null,8,["loading"])]),_:1})],512),[[M,l(n).loading]]),F(a("div",{class:"searchLi-ar",id:"articleScroll",onScroll:y[0]||(y[0]=(...r)=>l(I)&&l(I)(...r)),ref_key:"myList",ref:S},[a("ul",ke,[(_(!0),v(z,null,A(l(n).allList,r=>(_(),v("li",{class:"list-item-ar",key:r.id},[a("div",{class:"outsideIt-ar",onClick:Ae=>D(r)},[a("div",xe,[a("img",{src:r.imglink,alt:"img",style:{width:"90%",height:"90%",margin:"auto",padding:"auto","max-width":"110px","max-height":"110px"}},null,8,Be)]),a("div",Ie,[a("div",Le,[a("h4",{title:r.title},[a("a",{href:r.url,target:"_blank"},[a("h4",De,k(r.title),1)],8,Ce)],8,qe)]),a("div",Ve,[a("div",{title:r.description,class:"descri"},k(r.description),9,Te)]),a("div",$e,[a("span",null,[i(L,null,{default:g(()=>[i(T)]),_:1}),x(k(r.likes),1)]),a("span",null,[x(" \xA0"),i(L,null,{default:g(()=>[i(K)]),_:1}),x(" "+k(r.reads),1)]),a("span",null,[x(" \xA0"),i(L,null,{default:g(()=>[i(J)]),_:1}),x(" "+k(r.pubTime),1)])])])],8,Ee)]))),128))])],544),[[M,!l(n).loading]])])}}});const He=G(ze,[["__scopeId","data-v-bdf87128"]]);export{He as a,Se as b,Ge as s};
